python:
  - "2.7"

env:
  - LUA="luajit"

before_install:
  - sudo pip install autobahntestsuite
  - sudo apt-get install libev-dev
  - sudo apt-get install luajit
  - sudo apt-get install luarocks
  - sudo luarocks install luacov-coveralls
  - sudo luarocks install busted 1.11.1-1

install:
  - sudo luarocks make rockspecs/lua-websockets-core-scm-1.rockspec
  - sudo luarocks make rockspecs/lua-websockets-sync-scm-1.rockspec
  - sudo luarocks make rockspecs/lua-websockets-copas-scm-1.rockspec
  - sudo luarocks make rockspecs/lua-websockets-ev-scm-1.rockspec
  - sudo luarocks make rockspecs/lua-websockets-scm-1.rockspec

script:
  - ./test.sh

after_success:
  - luacov-coveralls


